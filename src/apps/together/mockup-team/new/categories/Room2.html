<!DOCTYPE html>
  <html>
  <style>
  canvas {
    padding-left: 0;
    padding-right: 0;
    margin-left: auto;
    margin-right: auto;
    display: block;
    width: 245px;
}
  </style>
    <head>
    <title>Polive - Real-time polling data</title>
    <meta charset="UTF-8" />
    <link rel="icon" type="x-icon" href="images/ficon.ico">
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

      <script src="lib/react.js"></script>
      <script src="lib/react-dom.js"></script>
      <script src="js/Chart.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
      <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    
    <!-- Polive React scripts -->
    <!-- JSX scripts to components-->
    <script type="text/babel" src="../components/room2.jsx"></script>
      <script type="text/babel" src="../components/navbar.jsx"></script>  
    <script type="text/babel" src="./components/chart.jsx"></script> 
    <!-- IMPORTANT: THIS MUST BE LAST SCRIPT LOADED! Connect the app and data -->
      <script type="text/babel" src="../data.jsx"></script>
    
    
    </head> 

    <body>
    <div id="nav-bar-container"></div>
    <div class="card-panel light-green lighten-3">
      <div class="row">
        <div class="col s12" id = "categoryTitle"></div>
    <div class="col s12" id = "roomNumber"></div>
        <div class="col s12 m4 l2">
          <div class="card-panel light-green darken-3">
            <h4 class="card-title"><b><u>Voters in Room</u></b></h4>
          <span class="white-text">
            <ul id="name"></ul>
          </span>
        </div>
      </div>
      <ul id="video_link"> 
      </ul>
    <div class="col s12 m4 l3">
      <div id="votes"></div>
    </div>
  </div>
</div>

      <!-- <script type="text/babel" src="../data.jsx"></script> -->
      <script>
        var ref = new Firebase('https://team-polive.firebaseio.com/users')
        var roomsRef = new Firebase('https://team-polive.firebaseio.com/rooms/');

    setVideo();
        
    /*KEEP FOR REFERENCE!
    //Show users in room -- this works 
        ref.orderByChild("room").equalTo("Room2").on('value', function(snapshot){
          var user = snapshot.val()
      //Clear card content before loading in users
      document.getElementById("name").innerHTML = "";
          snapshot.forEach(function(users) {
            var name = users.child("username").val()
            $('#name').append('<li class="collection-item">' + name + '</li>') 
            })
        })
    */
    
    function setVideo(){
      var ref = new Firebase('https://team-polive.firebaseio.com/rooms/Room2');
      var video = "";
      ref.once("value", function(data) {
        video = data.val();
        $('#video_link').append('<div class="video col l7 m7 s6 center"><iframe style="width:93%; height:400px;" src='+video.video+' frameborder="0" allowfullscreen></iframe></div>');
      });

      return;
    }
    </script>
 
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.0.0/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
    <script src="js/Chart.js"></script>
    <script src="js/init.js"></script>
  
    <!-- This is the chart display script: -->
    <script>
    // var ctx = document.getElementById("myChart2").getContext("2d");
    // var data = {
    //   labels: ["January", "February", "March", "April", "May", "June", "July"],
    //   datasets: [
    //    {
    //    label: "My First dataset",
    //    fillColor: "rgba(220,220,220,0.2)",
    //    strokeColor: "rgba(220,220,220,1)",
    //    pointColor: "rgba(220,220,220,1)",
    //    pointStrokeColor: "#fff",
    //    pointHighlightFill: "#fff",
    //    pointHighlightStroke: "rgba(220,220,220,1)",
    //    data: [65, 59, 80, 81, 56, 55, 40]
    //    },
    //    {
    //    label: "My Second dataset",
    //    fillColor: "rgba(151,187,205,0.2)",
    //    strokeColor: "rgba(151,187,205,1)",
    //    pointColor: "rgba(151,187,205,1)",
    //    pointStrokeColor: "#fff",
    //    pointHighlightFill: "#fff",
    //    pointHighlightStroke: "rgba(151,187,205,1)",
    //    data: [28, 48, 40, 19, 86, 27, 90]
    //    }
    //   ]
    // };
    // var options = {bezierCurve: false}
    // var myLineChart = new Chart(ctx).Line(data, options);
    </script>
  <!-- End of chart script: -->
  
    <script>
      // MyComponents is a global object where each property is a reference to a component class
      MyComponents = {}
      $(document).ready(function(){
        $('.parallax').parallax();
      });
    </script>
    
  
   </body>
  </html>
